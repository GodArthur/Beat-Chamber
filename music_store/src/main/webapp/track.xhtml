<?xml version="1.0" encoding="UTF-8"?>
<!-- Designed by Korjon Chang-Jones -->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <h:outputStylesheet library="styles" name="main.css"/>
        <title>Track Page</title>
    </h:head>
    <h:body>
        <header>
            <h:graphicImage library="images" name="UPDATED_BeatChamberLogo.png" styleClass="main-icon"/>
        </header>
        <nav>
            <div class="topnav">
                <h:link value="Home" outcome="index.xhtml" styleClass="active" id="first"/>
                <h:link value="Music"/>
                <h:link value="Contact"/>
                <h:link value="About"/>
                <h:form>
                    <h:commandButton styleClass="search-button" value="Search"/>
                    <h:inputText a:placeholder="Search for music" styleClass="search"/>
                </h:form>
                <h:graphicImage library="images" name="shopping-cart.png" styleClass="cart-icon"/>
            </div>
        </nav>

        <section id="track-section">

            <!-- Display for the track cover -->
            <div id="track-display">

                <div id="photoshoot-ad-wrapper">
                    <div id="photo-ad">
                        <h:graphicImage library="images" name="photoshoot.gif" width="200" height="360"/>
                    </div>
                </div>

                <div id="image-wrapper">
                    <h:graphicImage id="track-img" library="images" name="#{albumsJpaController.getAlbumPath(album.albumId, false)}" width="320" height="320"/> 
                    <p id="track-title">#{tracks.trackTitle}</p>
                </div>
            </div>

            <!-- List of other tracks in the album -->
            <div id="track-content">
                <div id="content-wrapper">
                    <ol>
                        <c:forEach var="trackItem" items="#{tracks.trackList}">
                            <li class="track-content-title">
                            <div class="song-item">
                                <h:form>
                                    <h:commandLink action="#{tracks.sendTrack}">
                                        <f:param name="trackId" value="#{trackItem.trackId}"/>
                                        <p>#{trackItem.trackTitle}</p>
                                    </h:commandLink> 
                                </h:form>
                                <!-- need to add action="{cookies.addTrackToCart(trackItem.trackId)}" -->
                                <h:button value="#{msgs.addToCart}"  rendered="#{tracks.trackId != trackItem.trackId}"/>
                            </div>
                        </li>
                        </c:forEach>
                    </ol>
                </div>
            </div>
            <!-- Button to add the displayed track to cart -->
            <h:button value="#{msgs.addToCart}"/>
            <hr />
            <p class="item-extra">#{msgs.otherViewed}</p>

            <!-- Items similar to the track being viewed -->
            <div id="viewed-items-container">
                <c:forEach var="albumItem" items="#{album.similarAlbums}">
                    <div class="album-cover-group">
                        <div>
                            <!-- making the image a link -->
                            <h:form>
                                <h:commandLink action="#{album.sendAlbum}">
                                    <f:param name="albumId" value="#{albumItem.albumNumber}"/>

                                    <h:graphicImage
                                        library="images"
                                        name="#{albumsJpaController.getAlbumPath(albumItem.albumNumber, false)}"
                                        width="270"
                                        height="270"
                                        />
                                </h:commandLink>
                            </h:form>
                        </div>
                        <!-- Making the text a link -->
                        <h:form>
                            <h:commandLink value="#{albumItem.albumTitle}" action="#{album.sendAlbum}">
                                <f:param name="albumId" value="#{albumItem.albumNumber}"/>
                            </h:commandLink>
                        </h:form>
                    </div>
                </c:forEach>    
            </div>

            <hr id="review-separator" />
            <p class="item-extra">#{msgs.custReviews}</p>
            <p>There are currently no reviews</p>
            <a href="review_page.xhtml"><button>#{msgs.addReview}</button></a>

            <div id="anime-ad-wrapper">
                <a
                    href="https://www.crunchyroll.com/"
                    target="_blank"
                    rel="noopener noreferrer"
                    >
                    <h:graphicImage id="anime-ad" library="images" name="#{adsJpaController.getAdPath(1)}" />
                </a>
            </div>
        </section>

        <div>
            <ui:insert name="footer">
                <ui:include src="/templates/footer.xhtml"/>
            </ui:insert>
        </div>
    </h:body>     
</html>
